(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{analyserNode:()=>w,audioCtx:()=>v,biquadFilter:()=>p,loadSoundFile:()=>k,lowshelfBiquadFilter:()=>S,pauseCurrentSound:()=>T,playCurrentSound:()=>x,setVolume:()=>P,setupWebaudio:()=>q});var n=function(e,t,n,o){return void 0===o&&(o=1),"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(o,")")},o=function(){function e(e,t,n,o,a,s){this.ctx=e,this.x=t,this.y=n,this.maxX=o,this.maxY=a,this.divergence=s,this.fps=60,this.n=0,this.c=4,this.radius=2}return e.prototype.update=function(e){this.loop(e)},e.prototype.loop=function(e){var t=this;this.c+=.01,this.radius+=.01;var n=this.n*this.dtr(this.divergence),o=this.c*Math.sqrt(this.n),a=o*Math.cos(n)+this.x,s=o*Math.sin(n)+this.y;a>=this.maxX&&s>=this.maxY&&(this.c=4,this.radius=2,this.n=0,this.ctx.clearRect(0,0,this.maxX,this.maxY));var c=e[this.n%e.length]/255*(this.maxY/8),i=this.n/5%360,r="hsl(".concat(i=(i+240)%360,", 100%, 50%)");this.drawCircle(a,s,c,r),this.n++,this.animationTimeout=setTimeout((function(){return t.loop(e)}),1e3/this.fps)},e.prototype.dtr=function(e){return e*(Math.PI/180)},e.prototype.drawCircle=function(e,t,n,o){this.ctx.save(),this.ctx.fillStyle=o,this.ctx.beginPath(),this.ctx.arc(e,t,n,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()},e.prototype.stopAnimation=function(){clearTimeout(this.animationTimeout)},e}();const a=o;var s=function(){function e(e,t,n,o,a,s,c){this.ctx=e,this.x=t,this.y=n,this.width=o,this.height=a,this.fillStyle=s,this.scale=c,this.fps=60}return e.prototype.update=function(){this.drawSquare()},e.prototype.drawSquare=function(){var e=this;this.ctx.save(),this.ctx.fillStyle=this.fillStyle,this.ctx.translate(this.x,this.y),this.ctx.scale(this.scale,this.scale),this.ctx.fillRect(0-this.width/2,0-this.height/2,this.width,this.height),this.ctx.restore(),this.scale+=.01,setTimeout((function(){return e.drawSquare()}),1e3/this.fps)},e}();const c=s;var i,r,l,h,u,d,g,f,v,y,w,m,p,S;!function(e){e[e.gain=.5]="gain",e[e.numSamples=256]="numSamples"}(g||(g={}));var b,q=function(e){var t=window.AudioContext;v=new t,f=new Audio,k(e),y=v.createMediaElementSource(f),(p=v.createBiquadFilter()).type="highshelf",(S=v.createBiquadFilter()).type="lowshelf",(w=v.createAnalyser()).fftSize=g.numSamples,(m=v.createGain()).gain.value=g.gain,y.connect(p),p.connect(S),S.connect(w),w.connect(m),m.connect(v.destination)},k=function(e){f.src=e},x=function(){f.play()},T=function(){f.pause()},P=function(e){e=Number(e),m.gain.value=e};!function(e){e.sound1="media/softvibes.mp3"}(b||(b={}));var L=document.querySelector("#cb-gradient"),E=document.querySelector("#cb-bars"),R=document.querySelector("#cb-rays"),M=document.querySelector("#cb-lines"),C=document.querySelector("#cb-circles"),A=document.querySelector("#cb-phyllo"),F=document.querySelector("#cb-noise"),I=document.querySelector("#cb-invert"),B=document.querySelector("#cb-emboss"),G=document.querySelector("#cb-treble"),N=document.querySelector("#cb-bass"),D=document.querySelector("#sunset-select"),O=document.querySelector("#sunrise-select"),z=document.querySelector("#night-select"),V=document.querySelector("#cb-shape"),j=document.querySelector("#info-visualizer"),W={showGradient:!0,showBars:!0,showRays:!0,showLines:!1,showCircles:!0,showPhyllo:!0,showSquares:!1,showNoise:!1,showInvert:!1,showEmboss:!1,playTreble:!1,playBass:!1,toggleWave:!1},H=!1,X=!1,Y=function(){var e;console.log("init called"),console.log("Testing utils.getRandomColor() import: ".concat("rgba(".concat((e=function(){return 185*Math.random()+35})(),",").concat(e(),",").concat(e(),",1)"))),q(b.sound1),console.log(t);var n,o,a=document.querySelector("canvas");a?(L.checked=W.showGradient,E.checked=W.showBars,C.checked=W.showCircles,F.checked=W.showNoise,R.checked=W.showRays,M.checked=W.showLines,A.checked=W.showPhyllo,V.checked=W.showSquares,(o=new XMLHttpRequest).onload=function(e){var t;n=e.target;try{t=JSON.parse(n.responseText)}catch(e){return document.querySelector("#output").innerHTML="BAD JSON",void console.error("Error parsing JSON:",e)}var o=t,a="";a+='<h2 class="title has-text-danger">'.concat(o.title?o.title:"No title found","</h2>"),a+='<p class="pt-4 subtitle has-text-danger">Music Selection</p>',a+='<ol class="pl-6">'.concat(o.audioFiles.map((function(e){return"<li>".concat(e,"</li>")})).join(""),"</ol>"),a+='<p class="pt-4">'.concat(o.instructions,"</p>"),document.querySelector("#output").innerHTML=a},o.onerror=function(e){return console.log("In onerror - HTTP Status Code = ".concat(n.status))},o.open("GET","data/av-data.json"),o.send(),U(a),function(e,t){i=e.getContext("2d"),r=e.width,l=e.height,h=function(e,t,n,o,a,s){for(var c=e.createLinearGradient(0,0,0,a),i=0,r=[{percent:0,color:"yellow"},{percent:.25,color:"orange"},{percent:.5,color:"coral"},{percent:1,color:"magenta"}];i<r.length;i++){var l=r[i];c.addColorStop(l.percent,l.color)}return c}(i,0,0,0,l),u=t,d=new Uint8Array(u.fftSize/2)}(a,w),K()):console.error("Canvas element not found in the document.")},J=function(){H?(p.frequency.setValueAtTime(1e3,v.currentTime),p.gain.setValueAtTime(25,v.currentTime)):p.gain.setValueAtTime(0,v.currentTime)},_=function(){X?(S.frequency.setValueAtTime(1e3,v.currentTime),S.gain.setValueAtTime(15,v.currentTime)):S.gain.setValueAtTime(0,v.currentTime)},U=function(e){var t=document.querySelector("#btn-fs"),n=document.querySelector("#btn-play");n.innerText="Play";try{t.addEventListener("click",(function(){var t;console.log("goFullscreen() called"),(t=e).requestFullscreen?t.requestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}))}catch(e){console.log("broken button")}n.onclick=function(e){var t=e.target;console.log("audioCtx.state before = ".concat(v.state)),"suspended"==v.state&&v.resume(),console.log("audioCtx.state after = ".concat(v.state)),"no"==t.dataset.playing?(x(),t.dataset.playing="yes",t.innerText="Pause"):(T(),t.dataset.playing="no",t.innerText="Play")};var o=document.querySelector("#slider-volume"),a=document.querySelector("#label-volume");o.oninput=function(e){var t=e.target;P(parseFloat(t.value));var n=Math.round(parseFloat(t.value)/2*100);a.innerHTML=n+""},o.dispatchEvent(new Event("input")),document.querySelector("#select-track").onchange=function(e){var t=e.target;k(t.value),"yes"==n.dataset.playing&&n.dispatchEvent(new MouseEvent("click"))},D.addEventListener("change",(function(){this.checked&&(W.showGradient=!0,W.showBars=!1,W.showInvert=!1,W.showRays=!0,W.showCircles=!0,W.showLines=!0)})),O.addEventListener("change",(function(){this.checked&&(W.showGradient=!0,W.showInvert=!0,W.showBars=!0,W.showRays=!0,W.showCircles=!0,W.showLines=!1)})),z.addEventListener("change",(function(){this.checked&&(W.showGradient=!1,W.showInvert=!1,W.showBars=!1,W.showRays=!1,W.showCircles=!0,W.showLines=!0)})),G.checked=H,N.checked=X,L.addEventListener("change",(function(){W.showGradient=this.checked})),E.addEventListener("change",(function(){W.showBars=this.checked})),R.addEventListener("change",(function(){W.showRays=this.checked})),M.addEventListener("change",(function(){W.showLines=this.checked})),C.addEventListener("change",(function(){W.showCircles=this.checked})),V.addEventListener("change",(function(){W.showSquares=this.checked})),A.addEventListener("change",(function(){W.showPhyllo=this.checked})),F.addEventListener("change",(function(){W.showNoise=this.checked})),I.addEventListener("change",(function(){W.showInvert=this.checked})),B.addEventListener("change",(function(){W.showEmboss=this.checked})),G.onchange=function(e){var t=e.target;H=t.checked,J()},N.onchange=function(e){var t=e.target;X=t.checked,_()},j.onchange=function(e){"frequency"==e.target.value?W.toggleWave=!1:W.toggleWave=!0},J(),_()},K=function(){requestAnimationFrame(K),function(e){if(e.toggleWave?u.getByteTimeDomainData(d):u.getByteFrequencyData(d),i.save(),i.fillStyle="black",i.globalAlpha=.3,i.fillRect(0,0,r,l),i.restore(),e.showGradient&&(i.fillStyle=h,i.fillRect(0,0,r,l)),e.showRays){e.showGradient?(i.fillStyle=h,i.globalAlpha=.1):(i.fillStyle="black",i.globalAlpha=1),i.fillRect(0,0,i.canvas.width,i.canvas.height),i.save(),i.translate(i.canvas.width/2-8,i.canvas.height/4.5-10);for(var t=0,o=d;t<o.length;t++){var s=(p=o[t])/255;i.translate(20,0),i.rotate(2*Math.PI/30),i.save(),i.scale(1,-1),i.fillStyle=n(0,200,150,1),i.fillRect(0,0,10,100*s),i.fillRect(0,0,10,100*s),i.restore(),i.translate(5,0)}i.restore()}if(e.showBars){var g=(r-4*(d.length-30))/d.length;i.save(),i.fillStyle="rgba(100,250,100,1)",i.strokeStyle="rgba(100,250,100,1)";for(var f=0;f<d.length;f++)i.fillRect(f*(g+4),260-d[f],g,200),i.strokeRect(f*(g+4),260-d[f],g,200);i.restore()}if(e.showLines)for(f=0;f<10;f++){i.save(),i.strokeStyle="rgba(255,255,0,1)",i.lineWidth=3;var v=-i.canvas.width/d.length,y=i.canvas.height/2+50+1.25*f*20;i.beginPath(),i.moveTo(v,y);for(var w=0,m=d;w<m.length;w++){var p=m[w];i.lineTo(v,y-p),v+=i.canvas.width/(d.length-40)}i.stroke(),i.closePath(),i.restore()}if(e.showCircles){var S=l/4;for(i.save(),i.globalAlpha=.5,f=0;f<d.length;f++){var b=(s=d[f]/255)*S;i.beginPath(),i.fillStyle=n(0,100,200,.5-s/5),i.arc(r/2,l/2,1.1*b,0,2*Math.PI,!1),i.fill(),i.closePath(),i.beginPath(),i.fillStyle=n(0,200,150,.5-s/5),i.arc(r/2,l/2,1.25*b,0,2*Math.PI,!1),i.fill(),i.closePath(),i.save(),i.beginPath(),i.fillStyle=n(0,100,250,.5-s/5),i.arc(r/2,l/2,.7*b,0,2*Math.PI,!1),i.fill(),i.closePath(),i.restore()}i.restore()}if(e.showPhyllo&&(new a(i,i.canvas.width/d.length,l/2,r,l,137.5).update(d),new a(i,i.canvas.width/d.length+r,l/2,r,l,137.5).update(d)),e.showSquares&&(e.showGradient?(i.fillStyle=h,i.globalAlpha=.1):(i.fillStyle="black",i.globalAlpha=1),new c(i,100,100,1e4/d.length,1e4/d.length,"yellow",0).update(),new c(i,600,300,1e4/d.length,1e4/d.length,"orange",0).update()),e.showNoise){var q=(R=(E=i.getImageData(0,0,r,l)).data).length,k=E.width;for(f=0;f<q;f+=4)e.showNoise&&Math.random()<.05&&(R[f]=R[f+1]=R[f+2]=255);i.putImageData(E,0,0)}if(e.showInvert){var x=(R=(E=i.getImageData(0,0,r,l)).data).length;for(k=E.width,f=0;f<x;f+=4){var T=R[f],P=R[f+1],L=R[f+2];R[f]=255-T,R[f+1]=255-P,R[f+2]=255-L}i.putImageData(E,0,0)}if(e.showEmboss){var E,R,M=(R=(E=i.getImageData(0,0,r,l)).data).length;for(k=E.width,f=0;f<M;f++)f%4!=3&&(R[f]=127+2*R[f]-R[f+4]-R[f+4*k]);i.putImageData(E,0,0)}}(W)};window.onload=function(){console.log("window.onload called"),Y()}})();
//# sourceMappingURL=bundle.js.map